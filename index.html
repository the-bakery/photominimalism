<html>
<head>
<link href="http://fonts.googleapis.com/css?family=Permanent+Marker|Vollkorn" rel="stylesheet" type="text/css">

<style>
html {
}
body { 
    /* Set up proportionate scaling */
    width: 100%;
    height: auto;
    min-height: 100%;
}

.header td{
  color:white;
  padding: 10px;
  margin:0;
  font-family:"helvetica", sans-serif;
  width:auto;
   background-color:rgba(0, 0, 0, .6);
}
</style>
</head>
<body>
<div style='height:80px;margin-top:20px;'>
<table style='margin:auto;'>
<tr class='header' style='text-align:center;'>
<td style='width:65px;'>
<span style="margin:0;">home</span>
</td>
<td style='width:65px;'>next</td>
<td style='width:65px;'>prev</td>
</tr>
</tr>
</table>


</div>
<div style='margin:auto;width:14in;width:10in;border:2px black solid;'>
  <img id='image' src='img.jpg' style='width:100%;'/>
</div>
<br />
<div style='font-family:"Helvetica Neue";margin:auto;width:10in;'>
<p style='margin:0px;padding-bottom:4px;'>Roof-top ladder climbing in San Francisco.</p>
<p style='margin:0px;'>February 20, 2013</p>
</div>
<script src="jquery-1.6.2.min.js"></script>
<script src="quantize.js"></script>
<script src="color-thief.js"></script>
<script type='text/javascript'>
var fadeouts = [];
var fadein = null;

$(document).ready(function() {
   var myimage = $('#image');
   var color = getDominantColor(myimage);
   var colors = createPalette(myimage, 5);
   
   $('body').css('background-color', 'rgb(' + color[0] + ',' + color[1] + ',' + color[2] + ')');
   $('body').css('color', 'rgb(' + colors[2][0] + ',' + colors[2][1] + ',' + colors[2][2] + ')');
   //$('.header').css('background-color', 'rgb(' + colors[3][0] + ',' + colors[3][1] + ',' + colors[3][2] + ')');

  window.hidden = false;
  fadeouts.push(setTimeout(function() {
    window.hidden = true;
    $('.header').fadeOut();
}, 3000));


});
$(document).mousemove(function(event) {

  if(fadeouts) {
    for(var i = 0; i < fadeouts.length; i++)  {
      console.log('clearing timeout: ' + i);
      clearTimeout(fadeouts[i]);
    }
  }
  if (window.hidden) {
    $('.header').fadeIn();
    window.hidden = false;
  }
  fadeouts.push(setTimeout(function() {
      if (!window.hidden) {
          $('.header').fadeOut();
          window.hidden=true;
      }
   }, 3000 
  ));
  
})
$('body').css('background-size', $(document).width() + "px " + $(document).height() + "px")

</script>
</body>
</html>
